#!/bin/bash

# Rofi script


$MENU | xargs -I{} xdg-open https://duckduckgo.com/search?q={}

declare -A URLS
URLS=(
  ["google"]="https://google.com/search?q="
  ["duckduckgo"]="https://duckduckgo.com/?q="
  ["github"]="https://github.com/search?q="
  ["goodreads"]="https://goodreads.com/search?q="
  ["stackoverflow"]="https://stackoverflow.com/search?q="
  ["archwiki"]="https://wiki.archlinux.org/index.php?search="
  ["youtube"]="https://youtube.com/results?search_query="
)

generate_list() {
  for i in "${!URLS[@]}"
  do
    echo "$i"
  done
}

main() {
  #Passes list to rofi
  platform=$( (generate_list) | rofi -dmenu -matching fuzzy -no-custom -location 0 -p "Search")
  if [[ -n "$platform" ]];
  then
    query=$( (echo ) | rofi -dmenu -matching fuzzy -location 0 -p "Query" )
    if [[ -n "$query" ]];
    then
      url=${URLS[$platform]}$query
      xdg-open "$url"
    else
      exit
    fi
  else
    exit
  fi
}
main
exit 0
